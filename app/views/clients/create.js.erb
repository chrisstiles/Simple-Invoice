var pageBody = $('body');

<% if @client.errors.any? %>

<% else %>

pageBody.append('<div class="success"> <div class="successtimer"></div><div class="closesuccess"></div><span><%= flash[:success] %></span></div>');
	<% flash.discard %>


// Create
// Render updated list of clients
var currentPage = $('em.current').text();
var clientCount = parseInt('<%= @clients_count %>')
var perPage = parseInt('<%= @per_page %>');

$('.client_name_search').val('');

if (clientCount > perPage) {
	$.ajax({
		type: 'GET',
		url: '/clients/?page=<%= @pagination_page %>',
		dataType: 'script',
		async: true
		}).done(function( msg ) {
		//console.log(msg)
		//  hideLoader();
		setClientSelected();
		}).fail(function(msg){
		console.log(msg)
	});
} else {
	$.ajax({
		type: 'GET',
		url: '/clients',
		dataType: 'script',
		async: true
		}).done(function( msg ) {
		//console.log(msg)
		//  hideLoader();
		setClientSelected();
		}).fail(function(msg){
		console.log(msg)
	});
}

 $.ajax({
	type: 'GET',
	url: '/clients/' + '<%= @client_id %>' + '/edit',
	dataType: 'script',
	async: true
	}).done(function( msg ) {
	//console.log(msg)
	//  hideLoader();
	}).fail(function(msg){
	console.log(msg)
});

var pageBody = $('body');
var pageWrapper = $('#pagewrapper');
var clientFilter = $('#clientfiltering');
var clientContainer = $('#clientscontainer');
var clientSearch = $('#clientsearch');
var clientsSidebar = $('#clientssidebar');

// Add selected class to client after pagination

function setClientSelected() {
	$('.client[data-id=<%= @client_id %>]').addClass('selected');
}


function setClientFilter() {
	var width = clientContainer.outerWidth();
	var clientContainerPosition = clientContainer.offset();

	pageWrapper.css('top', clientFilter.outerHeight() + clientSearch.outerHeight() + 63);

	clientSearch.css({
		'left': clientContainerPosition.left,
		'width': width
	});

	clientFilter.css({
		'left': clientContainerPosition.left,
		'width': width,
		'top': clientSearch.outerHeight() + 63
	});

	clientsSidebar.css({
		'left': clientContainerPosition.left + width,
		'width': width
	});

}

setClientFilter();


<% end %>