<% js = escape_javascript(render 'list') %>
$('#homepagination').remove();
$("#searchresults").html("<%= js %>");

$('#loadingspinner').hide();

$('body').addClass('hasfinishedloading');

window.scrollTo(0, 0);

var paginationWrapper = $('#homepagination');
if ($('.pagination').length) {
	paginationWrapper.show();
} else {
	paginationWrapper.hide();
}

var homePageWrapper = $('#pagewrapper');
var homeSide = $('#homeside');
var searchResults = $('#searchresults');

// Set position of pagination if it exists
var pagination = $('#homepagination');

function setHomePagination() {
	var leftPosition = $('.homeinvoice').first().offset().left - 100;
	var rightPosition = $(window).width() - homeSide.offset().left;

	pagination.css({
		'left' : leftPosition,
		'right' : rightPosition
	});

	if ($('.pagination').length) {
		pagination.show();
		searchResults.addClass('haspagination');
	} else {
		searchResults.removeClass('haspagination');
		pagination.hide();
	}

	$('#homepagination').detach().prependTo('body');
}

if (homePageWrapper.length) {
	setHomePagination();
}